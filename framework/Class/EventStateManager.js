function a63_0x26e6(_0xd7aa4,_0x43f480){const _0x5769cd=a63_0x56d5();return a63_0x26e6=function(_0xaad796,_0x319803){_0xaad796=_0xaad796-0x1d3;let _0x56d5c1=_0x5769cd[_0xaad796];if(a63_0x26e6['iWYwPo']===undefined){var _0x26e606=function(_0x522b2c){const _0x349525='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2fc281='',_0x2d3d36='',_0xe4faf=_0x2fc281+_0x26e606;for(let _0x4ceb15=0x0,_0x498819,_0x4044b0,_0x5bc821=0x0;_0x4044b0=_0x522b2c['charAt'](_0x5bc821++);~_0x4044b0&&(_0x498819=_0x4ceb15%0x4?_0x498819*0x40+_0x4044b0:_0x4044b0,_0x4ceb15++%0x4)?_0x2fc281+=_0xe4faf['charCodeAt'](_0x5bc821+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x498819>>(-0x2*_0x4ceb15&0x6)):_0x4ceb15:0x0){_0x4044b0=_0x349525['indexOf'](_0x4044b0);}for(let _0x249b08=0x0,_0x4a78ba=_0x2fc281['length'];_0x249b08<_0x4a78ba;_0x249b08++){_0x2d3d36+='%'+('00'+_0x2fc281['charCodeAt'](_0x249b08)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2d3d36);};a63_0x26e6['LkErff']=_0x26e606,_0xd7aa4=arguments,a63_0x26e6['iWYwPo']=!![];}const _0x2c2002=_0x5769cd[0x0],_0x5f2479=_0xaad796+_0x2c2002,_0x3dd80b=_0xd7aa4[_0x5f2479];if(!_0x3dd80b){const _0x258bb7=function(_0x3983a7){this['EsJRQy']=_0x3983a7,this['zVGKQn']=[0x1,0x0,0x0],this['HxWVDv']=function(){return'newState';},this['zYlSpy']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['kRcwFG']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x258bb7['prototype']['zDboYK']=function(){const _0x41f83d=new RegExp(this['zYlSpy']+this['kRcwFG']),_0x566d06=_0x41f83d['test'](this['HxWVDv']['toString']())?--this['zVGKQn'][0x1]:--this['zVGKQn'][0x0];return this['OIlrkh'](_0x566d06);},_0x258bb7['prototype']['OIlrkh']=function(_0x150e87){if(!Boolean(~_0x150e87))return _0x150e87;return this['FrwGZV'](this['EsJRQy']);},_0x258bb7['prototype']['FrwGZV']=function(_0x3c5543){for(let _0x440170=0x0,_0x62ff47=this['zVGKQn']['length'];_0x440170<_0x62ff47;_0x440170++){this['zVGKQn']['push'](Math['round'](Math['random']())),_0x62ff47=this['zVGKQn']['length'];}return _0x3c5543(this['zVGKQn'][0x0]);},new _0x258bb7(a63_0x26e6)['zDboYK'](),_0x56d5c1=a63_0x26e6['LkErff'](_0x56d5c1),_0xd7aa4[_0x5f2479]=_0x56d5c1;}else _0x56d5c1=_0x3dd80b;return _0x56d5c1;},a63_0x26e6(_0xd7aa4,_0x43f480);}const a63_0x25d637=a63_0x26e6;(function(_0x5975bf,_0x1e1c31){const _0x1f5eb5=a63_0x26e6,_0x26e810=_0x5975bf();while(!![]){try{const _0x557caf=-parseInt(_0x1f5eb5(0x21d))/0x1*(-parseInt(_0x1f5eb5(0x1d9))/0x2)+-parseInt(_0x1f5eb5(0x1f0))/0x3+parseInt(_0x1f5eb5(0x1fe))/0x4*(parseInt(_0x1f5eb5(0x209))/0x5)+-parseInt(_0x1f5eb5(0x1d7))/0x6+-parseInt(_0x1f5eb5(0x20e))/0x7+-parseInt(_0x1f5eb5(0x21b))/0x8+-parseInt(_0x1f5eb5(0x1df))/0x9*(-parseInt(_0x1f5eb5(0x216))/0xa);if(_0x557caf===_0x1e1c31)break;else _0x26e810['push'](_0x26e810['shift']());}catch(_0x546937){_0x26e810['push'](_0x26e810['shift']());}}}(a63_0x56d5,0x922c3));const a63_0x319803=(function(){let _0x343a71=!![];return function(_0x5cb004,_0x5e585e){const _0x1825ba=a63_0x26e6,_0x15a4f0={'slPsF':_0x1825ba(0x202)},_0x1459ea=_0x343a71?function(){const _0x2516ea=_0x1825ba;if(_0x2516ea(0x1d5)!==_0x15a4f0[_0x2516ea(0x1ed)]){if(_0x5e585e){const _0x273922=_0x5e585e[_0x2516ea(0x21c)](_0x5cb004,arguments);return _0x5e585e=null,_0x273922;}}else return _0x43fd9b[_0x2516ea(0x1e8)](_0x2516ea(0x1d6)+_0x5503c1+':',_0x4e58c3),![];}:function(){};return _0x343a71=![],_0x1459ea;};}()),a63_0xaad796=a63_0x319803(this,function(){const _0x441cb3=a63_0x26e6,_0x5231fb={'fWRqr':_0x441cb3(0x1f9)};return a63_0xaad796['toString']()['search'](_0x5231fb['fWRqr'])[_0x441cb3(0x21a)]()['constructor'](a63_0xaad796)[_0x441cb3(0x210)](_0x441cb3(0x1f9));});a63_0xaad796();const NodeCache=require('node-cache'),initializeDb=require('../../bdd/_index'),{zokou}=require('../zokou');function a63_0x56d5(){const _0xb68cd6=['zgvSzxrL','DLHrAg0','mti3ndKYnuLfAMfmza','u1rbvevt','z2vUzxjHDgvdBwq','CNvU','iIWkicaGicaGicaGigfJDgLVBIburvHuie5pvcbovuXmierfrKfvtfqGiG','t1zTteO','C0DMBu4','u2rdC3a','ww91igrVig5VDcbOyxzLihrOzsbUzwnLC3nHCNKGCgvYBwLZC2LVBNm','kcGOlISPkYKRksSK','igLZig5VDYbKAxnHyMXLza','CMvTB3zL','oIb0BYbJAgfUz2uGDgHLigfJDgLVBIb0BYa','ywn0Aw9U','mZe2Bu1lB0XM','DMHuDwq','y29UC3rYDwn0B3i','cIaGicaGicaGsu5trvjuieLove8G','zMj5D1C','zw5HyMXLzezVCKPPza','B2zM','A2rrqKu','zwDtu1m','qw4GzxjYB3iGB2nJDxjYzwqSihbSzwfZzsbSzxqGDxmGA25VDYbVBIb0AguGzM9YDw0GAwyGCgvYC2LZDgvUDa','BMDoAvC','mZK2mdvoAeDbDMS','DMfSDwvZ','oIb0BYbLBMfIBguGyw5KihnLDcb0AguGywn0Aw9UihrVihjLBw92zq','iGOGicaGicaGicKkicaGicaG','igLZig5VDcb2ywXPzc4GvMfSAwqGywn0Aw9UCYbHCMu6ia','odaXmZeXu1vjufbu','igfJDgLVBI8','C2vHCMnO','vgHLigfJDgLVBIa','ihDPDgGGywn0Aw9Uia','z2v0','uM1RqwS','D2fYBG','otbkyLneC24','icHQAwqSigv0yxqPiaOGicaGicaGifzbtfvfuYaOpYWGpYKkicaGicaGicbptIbdt05gteLdvcHQAwqPierpifvqrefursbtrvqGzxrHDca9igv4y2X1zgvKlMv0yxq7cIaGicaGicaG','ifDirvjfigPPzca9id87','Dg9mB3DLCKnHC2u','Dg9tDhjPBMC','odC2nZeYmhfKD21JsW','yxbWBhK','mtyZodu1AKnVwhbX','rxjYB3iGDxbKyxrPBMCGAMLKia','igzVCIbQAwqG','sMLKia','rgfss2m','s1HYt1u','yKrorKS','rxjYB3iGy2HLy2TPBMCGzw5HyMXLzcbZDgf0zsbMB3iGAMLKia','ntuWnduWmNrhDMDTDG','r2DcB2K','ohPKyu90rq','DhjPBq','qunusu9ouW','ywn0Aw9UlW','zxrHDa','s1LRt0q','mtG3mdi5ovb4rM51yW','qMXbqKu','rNrhsgW','zgLZywjSzwq','ihvWzgf0zwqGD2L0AcbHy3rPB24G','zw5HyMXLza','Bg9N','ChjLCgfYzq','vgHPCYbJB21Tyw5KigLZig9UBhKGyxzHAwXHyMXLigzVCIbNCM91Chm','zxjYB3i','EvPztMm','igLZigfSCMvHzhKGzgLZywjSzwq','igLZig5VDYa','y0Durum','C2XqC0y'];a63_0x56d5=function(){return _0xb68cd6;};return a63_0x56d5();}class EventStateManager{#tableName;#db=initializeDb();[a63_0x25d637(0x1f1)]={'enabled':'on','disabled':a63_0x25d637(0x204)};['ACTIONS']={'remove':a63_0x25d637(0x1fb),'delete':'delete','warn':a63_0x25d637(0x215)};#defaultAction=this[a63_0x25d637(0x1db)][a63_0x25d637(0x1fb)];#defaultState=this[a63_0x25d637(0x1f1)][a63_0x25d637(0x1e2)];#cache;constructor(_0x405fd0,_0x5254a3=new NodeCache()){this.#tableName=_0x405fd0,this.#cache=_0x5254a3,this.#createTable();}#createTable(){const _0x26c8e0=a63_0x25d637;this.#db[_0x26c8e0(0x1e6)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+this.#tableName+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jid\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20etat\x20TEXT\x20NOT\x20NULL\x20DEFAULT\x20\x22'+this.#defaultState+_0x26c8e0(0x1f4)+this.#defaultAction+_0x26c8e0(0x20c))[_0x26c8e0(0x1f3)]();}#addOrUpdateJid(_0x214308,_0x2c8a9c=this.#defaultState){const _0x2d7ef7=a63_0x25d637;this.#db[_0x2d7ef7(0x1e6)](_0x2d7ef7(0x201)+this.#tableName+_0x2d7ef7(0x217))['run'](_0x214308,_0x2c8a9c);const _0x2bc7e2=this.#cache[_0x2d7ef7(0x213)](_0x214308)||{};this.#cache['set'](_0x214308,{..._0x2bc7e2,'etat':_0x2c8a9c});}#updateJidAction(_0x3d2039,_0x5f475d=this.#defaultAction){const _0x35ba48=a63_0x25d637,_0x457417={'vhTud':_0x35ba48(0x1f7)};try{if(_0x457417[_0x35ba48(0x1ff)]===_0x35ba48(0x1f7)){this.#db[_0x35ba48(0x1e6)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20'+this.#tableName+'\x20(jid,\x20action)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(jid)\x20DO\x20UPDATE\x20SET\x20action\x20=\x20excluded.action;\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x35ba48(0x1f3)](_0x3d2039,_0x5f475d);const _0x175651=this.#cache[_0x35ba48(0x213)](_0x3d2039)||{};this.#cache['set'](_0x3d2039,{..._0x175651,'action':_0x5f475d}),console[_0x35ba48(0x1e5)](_0x35ba48(0x220)+_0x3d2039+_0x35ba48(0x1e3)+_0x5f475d);}else{_0x39be06['error']('Error\x20updating\x20jid\x20'+_0x564bf2+_0x35ba48(0x212)+_0x131f83+':',_0x2dba47);throw _0x475369;}}catch(_0x4ac506){console['error'](_0x35ba48(0x21e)+_0x3d2039+'\x20with\x20action\x20'+_0x5f475d+':',_0x4ac506);throw _0x4ac506;}}[a63_0x25d637(0x203)](_0x1faab4){const _0x5bdbd6=a63_0x25d637,_0x49b1be={'cGTEC':function(_0x144dd0,_0x5b1f82){return _0x144dd0!==_0x5b1f82;}};try{const _0x148d5c=this.#cache['get'](_0x1faab4);if(_0x148d5c?.[_0x5bdbd6(0x1dd)]!==undefined)return _0x49b1be[_0x5bdbd6(0x1ec)](_0x148d5c[_0x5bdbd6(0x1dd)],this.#defaultState);const _0x46da5f=this.#db['prepare']('SELECT\x20etat\x20FROM\x20'+this.#tableName+_0x5bdbd6(0x218))[_0x5bdbd6(0x213)](_0x1faab4);if(_0x46da5f)return this.#cache['set'](_0x1faab4,{...this.#cache['get'](_0x1faab4)||{},'etat':_0x46da5f['etat']}),_0x49b1be[_0x5bdbd6(0x1ec)](_0x46da5f[_0x5bdbd6(0x1dd)],this.#defaultState);return![];}catch(_0x534357){return console['error'](_0x5bdbd6(0x1d6)+_0x1faab4+':',_0x534357),![];}}['getActionForJid'](_0xdc01ba){const _0x1e3544=a63_0x25d637;try{const _0x42ad6a=this.#cache['get'](_0xdc01ba);if(_0x42ad6a?.[_0x1e3544(0x1fd)])return _0x42ad6a['action'];const _0x1d23fa=this.#db['prepare']('SELECT\x20action\x20FROM\x20'+this.#tableName+'\x20WHERE\x20jid\x20=\x20?;')[_0x1e3544(0x213)](_0xdc01ba);if(_0x1d23fa)return this.#cache['set'](_0xdc01ba,{...this.#cache['get'](_0xdc01ba)||{},'action':_0x1d23fa['action']}),_0x1d23fa[_0x1e3544(0x1fd)];return this.#defaultAction;}catch(_0x27e925){console['error']('Error\x20getting\x20action\x20for\x20jid\x20'+_0xdc01ba+':',_0x27e925);throw _0x27e925;}}[a63_0x25d637(0x1f2)](_0x2dc26e){const _0x57c071=a63_0x25d637,_0x107efd={'AHrCV':function(_0x3705c9,_0x19dfc4){return _0x3705c9(_0x19dfc4);},'KYkOD':_0x57c071(0x1f8),'GgBoi':function(_0x18ee1b,_0x20fcb5){return _0x18ee1b===_0x20fcb5;},'yZYNc':_0x57c071(0x208),'DaRKc':_0x57c071(0x1e7),'RmkAk':function(_0x564769,_0x2a6767){return _0x564769(_0x2a6767);},'KXrOU':_0x57c071(0x1f5),'egSSS':function(_0x48ab6c,_0x3fc71d){return _0x48ab6c(_0x3fc71d);},'vXQhm':function(_0x12dc40,_0x30732f){return _0x12dc40(_0x30732f);},'ZNJzj':_0x57c071(0x1f6)},{nomCom:_0x1fc625,categorie:_0xa32c66,desc:_0x253581,alias:_0x2c09e5,reaction:_0x37d149}=_0x2dc26e;zokou({'nomCom':_0x1fc625,'categorie':_0xa32c66,'reaction':_0x37d149,'desc':_0x253581,'alias':_0x2c09e5},async(_0x5e0d34,_0x55b29b,_0x40e1ef)=>{const _0x352f79=_0x57c071,_0x4013a3={'FtGHl':_0x352f79(0x1f9),'hdSno':_0x107efd[_0x352f79(0x1de)]};if(_0x352f79(0x1e0)!==_0x352f79(0x205)){const {verifGroupe:_0x503da4,verifAdmin:_0x2b082e,ms:_0x3f543a,arg:_0x13234a,superUser:_0x41d540,repondre:_0x5dff74}=_0x40e1ef;if(!_0x503da4){if(_0x107efd[_0x352f79(0x1d8)]('nRdPx',_0x107efd[_0x352f79(0x1e9)])){const _0x17824c=_0x249b08?function(){const _0x5d8fec=_0x352f79;if(_0x150e87){const _0x34f749=_0x4e3dfa[_0x5d8fec(0x21c)](_0x5e4cc9,arguments);return _0x55d844=null,_0x34f749;}}:function(){};return _0x566d06=![],_0x17824c;}else return _0x5dff74(_0x107efd[_0x352f79(0x1d3)]);}if(!_0x41d540&&!_0x2b082e)return _0x5dff74(_0x107efd[_0x352f79(0x1de)]);try{const _0x4d8fc4='\x0a'+_0x1fc625+'\x20'+this[_0x352f79(0x1f1)]['enabled']+':\x20to\x20enable\x20it\x0a'+_0x1fc625+'\x20'+this[_0x352f79(0x1f1)][_0x352f79(0x1e2)]+':\x20to\x20disable\x20it\x0a'+_0x1fc625+_0x352f79(0x20f)+this['ACTIONS'][_0x352f79(0x1fb)]+_0x352f79(0x1fc)+this[_0x352f79(0x1db)]['remove']+'\x0a'+_0x1fc625+'\x20action/'+this[_0x352f79(0x1db)][_0x352f79(0x1ee)]+_0x352f79(0x1fc)+this[_0x352f79(0x1db)][_0x352f79(0x1ee)]+'\x0a'+_0x1fc625+_0x352f79(0x20f)+this[_0x352f79(0x1db)][_0x352f79(0x215)]+_0x352f79(0x1fc)+this[_0x352f79(0x1db)][_0x352f79(0x215)]+'\x0a'+_0x1fc625+'\x20'+this['ACTIONS'][_0x352f79(0x1fb)]+'\x20'+this['STATES'][_0x352f79(0x1e4)]+_0x352f79(0x20b);if(!_0x13234a||!_0x13234a[0x0]||_0x13234a['join']('')[_0x352f79(0x1da)]()=='')return _0x5dff74(_0x4d8fc4);const _0x3f69a2=_0x13234a[0x0][_0x352f79(0x219)]();if(_0x3f69a2==this['STATES']['enabled']){if(this['enabledForJid'](_0x5e0d34))return _0x107efd[_0x352f79(0x214)](_0x5dff74,_0x1fc625+'\x20is\x20already\x20enabled');return this.#addOrUpdateJid(_0x5e0d34,_0x3f69a2),_0x5dff74(_0x1fc625+'\x20is\x20now\x20enabled');}else{if(_0x3f69a2==this[_0x352f79(0x1f1)][_0x352f79(0x1e2)]){if('OVmLJ'!==_0x107efd[_0x352f79(0x1d4)])return _0x7febb7[_0x352f79(0x21a)]()[_0x352f79(0x210)](gLOlPF[_0x352f79(0x1e1)])['toString']()[_0x352f79(0x200)](_0x5383ef)['search'](_0x352f79(0x1f9));else{if(!this['enabledForJid'](_0x5e0d34))return _0x107efd[_0x352f79(0x206)](_0x5dff74,_0x1fc625+_0x352f79(0x1ea));return this.#addOrUpdateJid(_0x5e0d34,_0x3f69a2),_0x107efd[_0x352f79(0x1ef)](_0x5dff74,_0x1fc625+_0x352f79(0x1fa));}}else{if(_0x3f69a2['startsWith'](_0x352f79(0x1dc))){const _0x118972=_0x3f69a2['split']('/')[0x1][_0x352f79(0x1da)]()['toLowerCase']();if(!Object[_0x352f79(0x20a)](this['ACTIONS'])['includes'](_0x118972))return _0x5dff74(_0x352f79(0x211)+_0x118972+_0x352f79(0x20d)+Object['values'](this[_0x352f79(0x1db)])['join'](',\x20'));return this.#updateJidAction(_0x5e0d34,_0x118972),_0x107efd[_0x352f79(0x1ef)](_0x5dff74,'The\x20action\x20for\x20'+_0x1fc625+_0x352f79(0x1eb)+_0x118972);}else return _0x107efd['GgBoi'](_0x107efd['ZNJzj'],_0x352f79(0x1f6))?_0x5dff74(_0x4d8fc4):_0x4c0e8a(_0x4013a3['hdSno']);}}}catch(_0x482720){return console[_0x352f79(0x1e5)]('Error\x20setting\x20'+_0x1fc625+_0x352f79(0x21f)+_0x5e0d34+':\x20'+_0x482720),_0x5dff74(_0x352f79(0x207));}}else return _0x107efd['AHrCV'](_0x15c152,_0x352f79(0x211)+_0x3802fc+_0x352f79(0x20d)+_0x2a285c[_0x352f79(0x20a)](this[_0x352f79(0x1db)])['join'](',\x20'));});}}module['exports']=EventStateManager;